<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>NeverGetMe</title>

  <!-- Bootstrap core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="css/cover.css" rel="stylesheet">
  <script src="js/jquery.min.js"></script>
  <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
  <script src="js/bootstrap.min.js"></script>
  <script src="js/popper.min.js"></script>
</head>

<body class="text-center">

  <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
    <header class="masthead mb-auto">
      <div class="inner">
        <h3 class="masthead-brand">NeverGetMe</h3>
        <nav class="nav nav-masthead justify-content-center">
          <a class="nav-link active" href="">Home</a>
          <a class="nav-link" href="">Features</a>
          <a class="nav-link" href="">Login in</a>
        </nav>
      </div>
    </header>

    <main role="main" class="inner cover">
      <h2 class="cover-heading">Sensitive word filtering</h1>
        <input type="text" id="filteringWord" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm">
        <h1> </h1>
        <h1> </h1>
        <!-- <button id="MySend" class="btn btn-secondary">Filtering</button> -->
        <p class="lead">
          <div class="btn-group" role="group" aria-label="Basic example">
            <button type="button" id="MySend" class="btn btn-secondary btn-lg">Filtering</button>
            <button type="button" id="showInformation" class="btn btn-secondary btn-lg">Files</button>
          </div>
          <input type="file" id="file" accept=".txt" style="display:none" multiple>
          <!-- <button id="MySend" class="btn  btn-secondary btn-lg">Filtering</button> -->
        </p>
    </main>

    <footer class="mastfoot mt-auto">
      <div class="inner">
        <p>Using <a href="https://getbootstrap.com/">Bootstrap</a>, by <a href="https://github.com/hTangle">@hTangle</a>.</p>
      </div>
    </footer>
  </div>


</body>
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle" style="color:black">Information</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="receiverShow" style="color:black">

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<script>

  $(document).ready(function () {
    $('#file').on("change", function () {
      // console.log("change")
      //console.log($('#btn_file').val());
      if ($('#file').val().endsWith(".txt")) {
        var formDate = new FormData();
        formDate.append("file", $('#file')[0].files[0]);
        $.ajax({
          url: '/uploadTxt',
          type: 'POST',
          cache: false,
          data: formDate,
          processData: false,
          contentType: false
        }).done(function (res) {
          console.log(res.output)
          if (res.state == "true") {
            $('#receiverShow').text(res.output)
            $('#exampleModalCenter').modal(exampleModalCenter)
          } else {
            $('#receiverShow').text("Some error happened")
            $('#exampleModalCenter').modal(exampleModalCenter)
          }
        }).fail(function (res) {
          $('#receiverShow').text("Some error happened")
          $('#exampleModalCenter').modal(exampleModalCenter)
        });
      }
    }
    );
    $("#showInformation").click(
      function () {
        $('#file').click()
        // $('#receiverShow').text("receiverShow")
        // $('#exampleModalCenter').modal(exampleModalCenter)
      }
    );
    $("#MySend").click(function () {
      if ($("#filteringWord").val() == "") {
        $('#receiverShow').text("Please input the words!")
        $('#exampleModalCenter').modal(exampleModalCenter)
        return;
      }
      $.post("/sensitiveword",
        {
          words: $("#filteringWord").val()
        },
        function (data, status) {
          console.log(data);
          $('#receiverShow').text(data.output)
          $('#exampleModalCenter').modal(exampleModalCenter)
          // alert("数据：" + data.output + "\n状态：" + status);
        });
    });
  });
</script>

</html>